language: java
jdk:
- oraclejdk8
services:
- docker
branches:
  only:
  - master
  - development
install: gradle install
script:
- export VERSION=$(grep "TS_HLA_EncodingRulesTester" ./.shared/libraries.gradle |
  awk '{print $3}' | tr -d \')
- echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin
- echo "$TNO_DOCKER_PASSWORD" | docker login app-docker136.hex.tno.nl --username "$TNO_DOCKER_USERNAME"
  --password-stdin
- cd TS_HLA_EncodingRulesTester
- docker build --build-arg version=$VERSION -t ivct/ts-hla-encoding-rules:$TRAVIS_BRANCH-latest
  -t ivct/ts-hla-encoding-rules:$TRAVIS_BRANCH-$VERSION -t .
- if [ $TRAVIS_BRANCH == "master" ]; then docker tag ivct/ts-hla-encoding-rules:$TRAVIS_BRANCH-$VERSION
  ivct/ts-hla-encoding-rules:$VERSION && docker tag ivct/ts-hla-encoding-rules:$TRAVIS_BRANCH-$VERSION
  ivct/ts-hla-encoding-rules:latest; fi
- docker push ivct/ts-hla-encoding-rules
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  - secure: aF15WT7qLyGTNWcpCvz1URwH+jbs53qPlTEaygNhukPjErJ6W4KMai5pVPdGmdJ9+yDYiSUILd9T6WOTOnsEBVRLNDbk52k1zx42WKPFUaZgXRLLRsXKbO/VAbM6UQ6E3F9YVWB7SGdLyDYJYSbhMj3n/5ZlFIxpHRrBASktLiBQaTn/n8wlPn3kNAI5yFZ/GGCnrbIHTOW5rdCFxVyo3z63cYM/E7fvBiinaxr4e2+VrbsRHQeSxwVG96JpznkZkNiUfdE29R4wouSahz7vZI+PDRNR0I9Od0P+aYBTdwbfEGuVcysOUJKkrTFPrqYyNUrxKHkvsFrOlaH34P5D6feCnrPy702QA46n9M58nmPw882gv/cPsMK9ugxTV6qk7FIHqHMyZF43LHTRccFOW10Jxucbr2gUzTg4XBQg8yASCZFRGOQRdvp4Da6+U1+HqiYYwXk8B9qhwTtV/vj9duRPxnlC+m9MRAgTBZmZcdDdGUoKepn6Z1W/ilIGsIHFoietOV8m402Dl1BMxB4FBTI/5RruMD2y2TglPKSsjqrEBMBb7HROjb00wdiZ0w8Hf9iqA6B4nHnBzv/Oq32BxpRILO/S3TXHpOvexGqtJc5YRaL05G3T95Yeq8SwPxbDGZ/WAHQvclnrwwIrYoRR1ot9jV0lBCVH88WdxyYDZdQ=
  - secure: fxYiDtYtUaQ1LOrUTb9gjyFz9wUDVP629lCTyg7z0lIbzcp3sIOIW1v+RSvoSjsXkOvMsmZHBGjRAVT+77iovsmBXvyfMldpMixjJ2LxwIzrltlIDzBWuH8XjyuE9YUcKgiPRSea7zLHGtFV53yNcJXijBDeI/lfH27Ke2K1FC0M4HXdQWR7r+VvQDNM4hyPuuZsPFQlehmp6nuM2I62S9/2jJ7lUN6UsveVSyVOR0n56Fie2mGtFrk7cQ/LWNHwaVNBpiAx+eGbYFsVajLGQdm4tHTkYfN/pFkASNdMttD5vSy6mK6H/QNJJuElW5Rzr/XpnQRfMt014z9QjLp+53zsKbsqEpUS4KfJ77Uk155S+yYRcJhhci6mefh3Vx+yPAOAphHmgAM+HL9uH1cC8CL8g6l5fYeBi/g46sNZtfESxQ6gpq6KlQSdV85cIO4ZgJXT0D0v4+hUbR+ZFO/7sO96hAA9W/d8GRFZ8yttnhwWAvlDFurkUHvVWQs3dKPOqeIlWaOZ7IP95SD2StSDsMkhZ0vh6E07CeffstklszftaTQj8SpEzwzPLJ2Tg1XNgCKC8qawG5orM6pxKw1iQsZSRe6QxuqfvjS88Po0uAHLY3jckwYNFSgiBz9iDOOcZXEY9+x/SgDIwC4lAkTjcbC2H4OeFDSVvNWkege9X0g=
  - secure: OkLDPHnJRVyhc+BmqlAVxWeFniaK70tY80IANxhGaLun49yie0Ww3onGUgFcXT8v+qxA9nCUZgA2tMEWyYCLZ+n/IksYVWevWqeGeeXa1Y/Q2GR25PPg7mZLBZ9+VLD/+9j09OGb2bYAVVOM9T8WwNpTmHnyovb2sRU369cws0Gda3Kp0pgDmWGmY11faOVcOmiK3U0vyw92Z9WTzuQOgZ2nYP8EN4l1ZMH5Bkl9V48L0U7jCnh+rg3+O9SbP+1kSAzAf/D5jyVADxuHJbVrsdtI/oUOfpBbPHbdSV6ejQ7RcQS4opd9Oj6cof+6PsfHL87mZNrKoHI3ok4KVQ7URHE05ucPapV9t+cOYcB53OPUNjr5jX4hHl+mMyOoKBIaoN5/pbItJJgGoTadFZ88zTEINkDFjZU0WRx8rQZ5JOUxqs+9D+wkQU40j0vzOHqZjg6zyhuqY1e4/PLZrqnM1m6PHs2CMPfs4neSYXy5X0zTjw5wMj+Xgf/Ybsa6tEzKJSRNapzx+sEmVuuIKnQlsM+Jefxy2q1mwacYtMDPgSwxOnGRnFncSorXgm8xTwkD4du+62c3nvFhXKOLWAwjKOjLCpG6xS7v63xdMVKBb/+CWt8ObZ3Wn9qWHuLe1/it+FK6QbkUGT+FJaoP7Om4ayHXn6BlpkOUAVDNH6CCQuU=
  - secure: S6XRlF8lQ9MiS5n2qouhulqibMjFdzDf6Y1yaE6LXj5fFLyRBCOmj5r1X/DJxWoDHDqHPm3xCQ6LeVhJMzfmeJeXwK4p4n6M0+jQwr/7tGbwn5aRl8gWCU0i5bZRlmc446Ei+x3KEaLA0gWMqfsv3B/KYenHATnin9N8QM0Fej37O5urDF3bl571Q9d6NGmhosyoJBM311Uzlgo59bSoOyDaMdWsrUa/sFgQJTRZ8BFU54HC+houGY4jIuEhhVNDdO1y87BoxBZwIzFRtFE/fXWGQLhuY1BBrpkzrAsCP7/R7UPo2HD88JW3cXgEye9uXPz7Yp1qZ3IsveRduDMLJyll1blYEn5tMPsK2iVBlh6UmDp3lBoaLB1isIeg1vaVWDXzFmuJjFqpK1V1LISt73X46+P2xT+cO5NR1AfexggnnUaEjs3IHNjHYOZqAbSxJqCPEwC89YQIXA3PiYvggBZ3Z60XWhptjDQtFtUsRmtR/HdDFvb5GPf9WTpVqP7BCuZqWyVodE0tuvcKi/oBuTgefh7xZkYi8/LA+vqWvTQtRKRvmZ7cLjOZa3H6LItH6fUIGE/c4ytmVWnAN8h/H18/NT6At9lIOu+7dbMAg6Gtp71qyUrjHdhaiC9ZpkwaKAeMFenJwVJ985dEEO0dpqVmLSF46nT9UmLyp43pyaE=
